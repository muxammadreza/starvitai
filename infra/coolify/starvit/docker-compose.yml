services:
  api:
    build:
      context: ../../..
      dockerfile: services/api/Dockerfile
    environment:
      MEDPLUM_BASE_URL: ${MEDPLUM_BASE_URL:-https://fhir.starvit.ca/}
      MEDPLUM_CLIENT_ID: ${MEDPLUM_CLIENT_ID}
      MEDPLUM_CLIENT_SECRET: ${MEDPLUM_CLIENT_SECRET}
      GRAPH_STORE_URL: ${GRAPH_STORE_URL}
    ports:
      - "8000:8000"

  clinician:
    build:
      context: ../../..
      dockerfile: apps/clinician/Dockerfile
      args:
        NEXT_PUBLIC_API_URL: https://api.starvit.ca
    ports:
      - "3001:3000"

  research:
    build:
      context: ../../..
      dockerfile: apps/research/Dockerfile
      args:
        NEXT_PUBLIC_API_URL: https://api.starvit.ca
    ports:
      - "3002:3000"
